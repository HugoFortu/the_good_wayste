<% city = Place.find(1) %>

<% @product.components.each do |component| %>
  <% component_name = component.name %>
  <% material = component.material %>
  <% material_name = material.name.downcase %>
  <%
    garbage = Garbage.
      where(place: city).
      where("? = ANY (garbages.accepted_materials)", material.slug).
      first
  %>

  <% if garbage.color.include?("borne") %>
    <% sorting_instructions = " Rendez-vous Ã  la #{garbage.color} la plus proche pour le jeter" %>
  <% else %>
    <% sorting_instructions = "Jetez-le dans la poubelle #{garbage.color}" %>
  <% end %>


 <%= render 'shared/card-show' , component: component_name , material: material_name, sorting_instructions: sorting_instructions, color: garbage.color%>
<% end %>
